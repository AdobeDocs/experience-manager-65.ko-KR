---
title: 감시 폴더 끝점 구성
seo-title: 감시 폴더 끝점 구성
description: 감시 폴더 끝점을 구성하는 방법에 대해 알아봅니다.
seo-description: 감시 폴더 끝점을 구성하는 방법에 대해 알아봅니다.
uuid: 01fb5ff8-2071-44bd-9241-7d5d41a5b26e
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.4/FORMS
discoiquuid: 761e7909-43ba-4642-bcfc-8d76f139b9a3
translation-type: tm+mt
source-git-commit: 2cf9dcf2e9cf71c54e19e2c6ee825c9a8f00a9b7
workflow-type: tm+mt
source-wordcount: '7174'
ht-degree: 0%

---


# 감시 폴더 끝점 구성 중 {#configuring-watched-folder-endpoints}

관리자는 사용자가 감시 폴더에 파일(예: PDF 파일)을 배치할 때 구성된 서비스 작업이 호출되어 파일을 조작하도록 *감시 폴더*&#x200B;라고 하는 네트워크 폴더를 구성할 수 있습니다. 서비스가 지정된 작업을 수행하면 수정된 파일이 지정된 출력 폴더에 저장됩니다.

## 감시 폴더 서비스 {#configuring-the-watched-folder-service} 구성

감시 폴더 끝점을 구성하기 전에 감시 폴더 서비스를 구성합니다. 감시 폴더 서비스의 구성 매개 변수에는 두 가지 목적이 있습니다.

* 모든 감시 폴더 끝점에 공통인 특성을 구성하려면
* 모든 감시 폴더 끝점에 대한 기본값을 제공하려면

감시 폴더 서비스를 구성한 후 대상 서비스에 대해 감시 폴더 끝점을 추가합니다. 끝점을 추가할 때 구성된 감시 폴더 서비스의 입력 폴더에 파일이나 폴더를 배치할 때 호출할 서비스 이름 및 작업 이름과 같은 값을 설정합니다. 감시 폴더 서비스 구성에 대한 자세한 내용은 [감시 폴더 서비스 설정](/help/forms/using/admin-help/configure-service-settings.md#watched-folder-service-settings)을 참조하십시오.

## 감시 폴더 {#creating-a-watched-folder} 만들기

다음 두 가지 방법으로 감시 폴더를 만들 수 있습니다.

* 감시 폴더 끝점에 대한 설정을 구성할 때 다음 예와 같이 경로 상자에 상위 디렉토리에 대한 전체 경로를 입력하고 생성할 감시 폴더의 이름을 추가합니다.
   `  C:\MyPDFs\MyWatchedFolder`MyWatchedFolder 폴더가 아직 없으므로 AEM 양식은 해당 위치에서 폴더를 만들려고 합니다.

* 감시 폴더 끝점을 구성하기 전에 파일 시스템에 폴더를 만든 다음 경로 상자에 전체 경로를 입력합니다.

클러스터된 환경에서 감시 폴더로 사용할 폴더는 파일 시스템 또는 네트워크에서 액세스 가능하고 쓰기 가능하며 공유해야 합니다. 이 시나리오에서는 클러스터의 각 응용 프로그램 서버 인스턴스에 동일한 공유 폴더에 대한 액세스 권한이 있어야 합니다.

Windows에서 응용 프로그램 서버가 서비스로 실행 중인 경우 다음 방법 중 하나로 공유 폴더에 대한 적절한 액세스 권한을 사용하여 시작해야 합니다.

* 공유 감시 폴더에 대한 적절한 액세스 권한이 있는 특정 사용자로 시작하도록 응용 프로그램 서버 서비스 로그온(**매개 변수**)을 구성합니다.
* 서비스가 데스크탑과 상호 작용할 수 있도록 [응용 프로그램 서버 서비스를 로컬 시스템으로 시작] 옵션을 구성합니다. 이 옵션을 사용하려면 공유 감시 폴더에 액세스하고 모든 사람에게 쓰기 가능해야 합니다.

## 감시 폴더 연결 {#chaining-together-watched-folders}

감시 폴더를 서로 연계하여 하나의 감시 폴더의 결과 문서가 다음 감시 폴더의 입력 문서인지 확인할 수 있습니다. 감시 폴더마다 다른 서비스를 호출할 수 있습니다. 이렇게 감시 폴더를 구성하면 여러 서비스를 호출할 수 있습니다. 예를 들어 감시 폴더 중 하나가 PDF 파일을 Adobe PostScript®로 변환하고 두 번째 감시 폴더를 PostScript 파일을 PDF/A 형식으로 변환할 수 있습니다. 이렇게 하려면 첫 번째 끝점에서 정의한 감시 폴더의 *result* 폴더를 두 번째 끝점에 의해 정의된 감시 폴더의 *input* 폴더를 가리키도록 설정하기만 하면 됩니다.

첫 번째 변환에서 출력하면 \path\result으로 이동합니다. 두 번째 변환에 대한 입력은 \path\result이고 두 번째 변환에서 출력하는 경우 \path\result\result (또는 두 번째 변환에 대해 [결과 폴더] 상자에 정의하는 디렉토리)로 이동합니다.

## 사용자가 감시 폴더 {#how-users-interact-with-watched-folders}와 상호 작용하는 방법

감시 폴더 끝점의 경우 사용자는 데스크탑에서 감시 폴더로 입력 파일이나 폴더를 복사하거나 드래그하여 호출할 수 있습니다. 파일은 도착하는 순서대로 처리됩니다.

감시 폴더 끝점의 경우 작업에 하나의 입력 파일만 필요한 경우 사용자는 해당 파일을 감시 폴더의 루트에 복사할 수 있습니다.

작업에 둘 이상의 입력 파일이 포함되어 있는 경우, 사용자는 모든 필수 파일이 포함된 감시 폴더 계층 외부의 폴더를 만들어야 합니다. 이 새 폴더에는 입력 파일(및 프로세스에 필요한 경우 DCX 파일)이 포함되어야 합니다. 작업 폴더가 생성되면 사용자는 해당 폴더를 감시 폴더의 입력 폴더로 복사합니다.

>[!NOTE]
>
>응용 프로그램 서버가 감시 폴더의 파일에 대한 액세스를 삭제했는지 확인합니다. AEM 양식이 스캔한 후 입력 폴더에서 파일을 삭제할 수 없는 경우 연관된 프로세스가 무기한으로 호출됩니다.

## 감시 폴더 출력 {#watched-folder-output}

입력이 폴더이고 출력이 여러 파일로 구성된 경우, AEM 양식은 입력 폴더와 동일한 이름의 출력 폴더를 만들고 출력 파일을 해당 폴더에 복사합니다. 출력이 출력 프로세스의 출력과 같이 키-값 쌍이 포함된 문서 맵으로 구성되면 이 키가 출력 파일 이름으로 사용됩니다.

끝점 프로세스에서 생성되는 출력 파일 이름은 문자, 숫자 및 마침표(.) 이외의 문자를 포함할 수 없습니다. 파일 확장명 앞에 있습니다. AEM 양식은 다른 문자를 16진수 값으로 변환합니다.

클라이언트 응용 프로그램은 감시 폴더 결과 폴더에서 결과 문서를 선택합니다. 프로세스 오류가 감시 폴더 오류 폴더에 기록됩니다.

## 감시 폴더가 작동하는 방법 {#how-watched-folder-works}

감시 폴더 모듈에는 다음과 같은 서비스가 포함되어 있습니다.

* 감시 폴더 서비스
* provider.file_scan_service
* provider.file_write_results_service

위에 나열된 서비스 외에도, 감시 폴더는 작업을 예약하기 위한 스케줄러 서비스와 대상 서비스의 비동기 호출을 지원하기 위한 작업 관리자 서비스를 포함한 다른 서비스에 종속됩니다.

### 감시 폴더가 호출 요청을 처리하는 방법 {#how-watched-folder-processes-an-invocation-request}

감시 폴더 서비스는 끝점의 만들기, 업데이트 및 삭제를 처리합니다. 관리자가 끝점을 만들면 지정된 반복 간격 또는 cron 식을 기반으로 스케줄러 서비스에 의해 트리거되도록 예약됩니다.

이 다이어그램은 감시 폴더가 호출 요청을 처리하는 방법을 보여 줍니다.

![en_watchedfolder](assets/en_watchedfolder.png)

감시 폴더를 사용하여 서비스를 호출하는 프로세스는 다음과 같습니다.

1. 클라이언트 응용 프로그램은 감시 폴더 입력 폴더에 파일 또는 폴더를 배치합니다.
1. 작업 검색 간격이 발생하면 스케줄러 서비스는 provider.file_scan_service를 호출하여 입력 폴더의 파일이나 폴더를 처리합니다.
1. provider.file_scan_service는 다음 작업을 수행합니다.


   * 포함 파일 패턴과 일치하는 파일 또는 폴더의 입력 폴더를 스캔하고 지정된 제외 파일 패턴의 파일 또는 폴더를 제외합니다. 가장 오래된 파일이나 폴더가 먼저 선택됩니다. 대기 시간보다 오래된 파일 및 폴더도 선택됩니다. 한 번의 스캔으로 처리되는 파일 또는 폴더의 수는 일괄 처리 크기에 따라 달라집니다. 파일 패턴에 대한 자세한 내용은 [파일 패턴 정보](configuring-watched-folder-endpoints.md#about-file-patterns)를 참조하십시오. 일괄 처리 크기 설정에 대한 자세한 내용은 [감시 폴더 서비스 설정](/help/forms/using/admin-help/configure-service-settings.md#watched-folder-service-settings)을 참조하십시오.
   * 처리할 파일이나 폴더를 선택합니다. 파일 또는 폴더가 완전히 다운로드되지 않은 경우 다음 스캔에서 선택합니다. 폴더가 완전히 다운로드되었는지 확인하려면 관리자는 제외 파일 패턴을 사용하여 이름이 있는 폴더를 만들어야 합니다. 폴더에 모든 파일이 있는 후에는 포함 파일 패턴에 지정된 패턴으로 이름을 변경해야 합니다. 이 단계를 수행하면 폴더에 서비스를 호출하는 데 필요한 모든 파일이 포함됩니다. 폴더가 완전히 다운로드되었는지 확인하는 방법에 대한 자세한 내용은 [감시 폴더 팁과 트릭](configuring-watched-folder-endpoints.md#tips-and-tricks-for-watched-folders)을 참조하십시오.
   * 처리할 파일을 선택한 후 파일 또는 폴더를 스테이지 폴더로 이동합니다.
   * 스테이지 폴더의 파일 또는 폴더를 끝점 입력 매개 변수 매핑을 기반으로 적절한 입력으로 변환합니다. 입력 매개 변수 매핑의 예를 보려면 [감시 폴더](configuring-watched-folder-endpoints.md#tips-and-tricks-for-watched-folders)에 대한 팁 및 트릭을 참조하십시오.


1. 끝점에 대해 구성된 대상 서비스는 동기적 또는 비동기적으로 호출됩니다. 대상 서비스는 끝점에 대해 구성된 사용자 이름 및 암호를 사용하여 호출됩니다.

   * 동기 호출은 대상 서비스를 직접 호출하고 응답을 즉시 처리합니다.
   * 비동기 호출의 경우 대상 서비스가 큐에 요청을 배치하는 작업 관리자 서비스를 통해 호출됩니다. 작업 관리자 서비스는 결과를 처리하기 위해 provider.file_write_results_service를 호출합니다.

1. provider.file_write_results_service는 대상 서비스 호출의 응답 또는 실패를 처리합니다. 성공하면 종단점 구성을 기반으로 결과 폴더에 출력이 저장됩니다. 또한 provider.file_write_results_service는 완료 시 결과를 보존하도록 종단점이 구성된 경우 소스를 유지합니다.

   대상 서비스를 호출하면 오류가 발생하면 provider.file_write_results_service는 failure.log 파일의 실패 이유를 기록하고 해당 파일을 실패 폴더에 넣습니다. 실패 폴더는 끝점에 대해 지정된 구성 매개 변수를 기반으로 만들어집니다. 관리자가 끝점 구성에 대해 [실패 시 유지] 옵션을 설정하면 provider.file_write_results_service도 소스 파일을 실패 폴더에 복사합니다. 실패 폴더에서 파일을 복구하는 방법에 대한 자세한 내용은 [실패 지점 및 복구](configuring-watched-folder-endpoints.md#failure-points-and-recovery)를 참조하십시오.


## 감시 폴더 끝점 설정 {#watched-folder-endpoint-settings}

다음 설정을 사용하여 감시 폴더 끝점을 구성합니다.

**이름:** (필수) 끝점을 식별합니다. 작업 공간에 표시된 이름이 잘리므로 &lt; 문자를 포함하지 마십시오. URL을 끝점의 이름으로 입력하는 경우 RFC1738에 지정된 구문 규칙을 따르는지 확인하십시오.

**설명:** 끝점에 대한 설명입니다. 작업 공간에 표시된 설명이 잘리므로 &lt; 문자를 포함하지 마십시오.

**경로:** (필수) 감시 폴더 위치를 지정합니다. 클러스터 환경에서 이 설정은 클러스터의 모든 컴퓨터에서 액세스할 수 있는 공유 네트워크 폴더를 가리켜야 합니다.

**비동기:** 호출 유형을 비동기 또는 동기식으로 식별합니다. 기본값은 비동기 값입니다. 장기 사용 프로세스에는 비동기식이 권장되지만, 일시적 또는 단기 프로세스에 동기식이 권장됩니다.

**cron 표현식:** cron 표현식을 사용하여 감시 폴더를 예약해야 하는 경우 cron 표현식을 입력합니다. 이 설정을 구성하면 반복 간격이 무시됩니다.

**반복 간격:** 입력한 내용을 위해 감시 폴더를 스캔하는 간격(초)입니다. [스로틀] 설정을 사용하지 않는 경우 [반복 간격]은 평균 작업을 처리하는 시간보다 길어야 합니다.그렇지 않으면 시스템에 과부하가 발생할 수 있습니다. 기본값은 5입니다. 자세한 내용은 배치 크기에 대한 설명을 참조하십시오.

**반복 횟수:** 감시 폴더가 폴더 또는 디렉토리를 검색하는 횟수입니다. -1 값은 무한 검색을 나타냅니다. 기본값은 -1입니다.

**스로틀:** 이 옵션을 선택하면 AEM에서 양식을 지정한 시간에 처리하는 감시 폴더 작업 수가 제한됩니다. 최대 작업 수는 배치 크기 값에 의해 결정됩니다. 조정 정보를 참조하십시오.

**사용자 이름:** (필수) 감시 폴더에서 대상 서비스를 호출할 때 사용되는 사용자 이름입니다. 기본값은 SuperAdmin입니다.

**도메인 이름:** (필수) 사용자의 도메인입니다. 기본값은 DefaultDom입니다.

**일괄 처리 크기:** 스캔당 선택할 파일 또는 폴더의 수입니다. 시스템에 과부하를 방지하는 데 사용;한 번에 너무 많은 파일을 스캔하면 충돌이 발생할 수 있습니다. 기본값은 2입니다.

[반복 간격] 및 [일괄 크기] 설정은 스캔할 때마다 감시 폴더를 선택하는 파일 수를 결정합니다. 감시 폴더는 Quartz 스레드 풀을 사용하여 입력 폴더를 검색합니다. 스레드 풀은 다른 서비스와 공유됩니다. 검색 간격이 작은 경우 스레드는 입력 폴더를 자주 검색합니다. 파일을 감시 폴더에 자주 드롭하는 경우 스캔 간격을 작게 유지해야 합니다. 파일이 간혹 삭제되는 경우에는 다른 서비스에서 스레드를 사용할 수 있도록 더 큰 스캔 간격을 사용하십시오.

많은 양의 파일을 삭제하는 경우 일괄 처리 크기를 크게 만듭니다. 예를 들어 감시 폴더 끝점에서 호출한 서비스가 분당 700개의 파일을 처리할 수 있고 사용자가 동일한 속도로 파일을 입력 폴더에 드롭한 다음 일괄 처리 크기를 350으로 설정하고 반복 간격을 30초로 설정하면 감시 폴더를 너무 자주 스캔하는 데 드는 비용을 부담하지 않고 감시 폴더 성능을 활용할 수 있습니다.

파일을 감시 폴더에 드롭하면 입력에 있는 파일이 나열됩니다. 스캔하는 매 초마다 성능이 저하될 수 있습니다. 스캔 간격을 늘리면 성능이 향상될 수 있습니다. 삭제할 파일의 볼륨이 작은 경우 [일괄 처리 크기]와 [반복 간격]을 적절히 조정합니다. 예를 들어 초당 10개의 파일이 삭제되는 경우 [반복 간격]을 1초로 설정하고 [일괄 처리 크기]를 10으로 설정해 봅니다.

**대기 시간:** 폴더 또는 파일을 만든 후 스캔하기 전에 대기할 시간(밀리초)입니다. 예를 들어 대기 시간이 3,600,000밀리초(1시간)이고 파일이 1분 전에 만들어진 경우 이 파일은 59분 이상 경과하면 선택됩니다. 기본값은 0입니다.

이 설정은 파일이나 폴더가 입력 폴더에 완전히 복사되도록 하는 데 유용합니다. 예를 들어 처리할 대용량 파일이 있고 파일을 다운로드하는 데 10분이 걸리는 경우 대기 시간을 10amp;ast;60amp;ast;1000밀리초로 설정합니다. 이렇게 하면 감시 폴더가 10분이 채 되지 않은 경우 해당 파일을 스캔하지 못합니다.

**파일 패턴 제외:** 세미콜론 **으로 구분되는 패턴 목록** 은 감시 폴더에서 스캔하여 선택할 파일과 폴더를 결정하는 데 사용합니다. 이 패턴이 있는 파일 또는 폴더는 처리를 위해 스캔되지 않습니다.

이 설정은 입력이 여러 파일이 있는 폴더일 때 유용합니다. 폴더 내용을 감시 폴더에서 선택할 이름의 폴더로 복사할 수 있습니다. 이렇게 하면 폴더를 입력 폴더로 완전히 복사하기 전에 감시 폴더가 처리할 폴더를 선택할 수 없습니다.

파일 패턴을 사용하여 제외할 수 있습니다.

* 특정 파일 이름 확장자가 있는 파일;예: &amp;ast;.dat, &amp;ast;.xml, &amp;ast;.pdf.
* 특정 이름의 파일;예를 들어, data.&amp;ast;는 *data1*, *data2* 등의 이름의 파일 및 폴더를 제외합니다.
* 다음 예와 같이 이름과 확장명에 합성 표현식이 있는 파일:

   * Data[0-9][0-9][0-9].[dD][aA]&#39;port&#39;
   * &amp;ast;[dD][Aa]&#39;port&#39;
   * &amp;ast;[Xx][Mm][Ll]

파일 패턴에 대한 자세한 내용은 [파일 패턴 정보](configuring-watched-folder-endpoints.md#about-file-patterns)를 참조하십시오.

**파일 패턴 포함:** (필수) 감시 폴더 **가 스캔하고 선택하는 폴더 및 파일을 결정하는 데 사용하는 세미콜론으로** 구분된 패턴 목록입니다. 예를 들어 [파일 패턴 포함]이 입력&amp;ast;인 경우 입력&amp;ast;와 일치하는 모든 파일 및 폴더 포함;를 선택합니다. 여기에는 input1, input2 등의 파일 및 폴더가 포함됩니다.

기본값은 &amp;ast;입니다.모든 파일 및 폴더를 표시합니다.

파일 패턴을 사용하여 다음을 포함할 수 있습니다.

* 특정 파일 이름 확장자가 있는 파일;예: &amp;ast;.dat, &amp;ast;.xml, &amp;ast;.pdf.
* 특정 이름의 파일;예를 들어, data.&amp;ast;에는 *data1*, *data2* 등의 파일 및 폴더가 포함됩니다.
* 다음 예와 같이 이름과 확장명에 합성 표현식이 있는 파일:

   * Data[0-9][0-9][0-9].[dD][aA]&#39;port&#39;
   * &amp;ast;[dD][Aa]&#39;port&#39;
   * &amp;ast;[Xx][Mm][Ll]

파일 패턴에 대한 자세한 내용은 [파일 패턴 정보](configuring-watched-folder-endpoints.md#about-file-patterns)를 참조하십시오.


**결과 폴더:** 저장된 결과가 저장되는 폴더입니다. 결과가 이 폴더에 나타나지 않으면 실패 폴더를 확인하십시오. 읽기 전용 파일은 처리되지 않고 실패 폴더에 저장됩니다. 이 값은 다음 파일 패턴을 사용하는 절대 경로나 상대 경로일 수 있습니다.

* %F = 파일 이름 접두어
* %E = 파일 이름 확장명
* %Y = 년(전체)
* %y = 년(마지막 2자리)
* %M = 월
* %D = 월 중 일
* %d = 연도
* %H = 시간(24시간)
* %h = 시간(12시간)
* %m = 분
* %s = 초
* %l = 밀리초
* %R = 무작위 숫자(0에서 9 사이)
* %P = 프로세스 또는 작업 ID

예를 들어 2009년 7월 17일 오후 8시이고 `C:/Test/WF0/failure/%Y/%M/%D/%H/`을 지정하는 경우 결과 폴더는 `C:/Test/WF0/failure/2009/07/17/20`입니다.

경로가 절대 경로가 아니라 상대 경로인 경우 감시 폴더 내에 폴더가 생성됩니다. 기본값은 감시 폴더 내의 결과 폴더인 result/%Y/%M/%D/입니다. 파일 패턴에 대한 자세한 내용은 [파일 패턴 정보](configuring-watched-folder-endpoints.md#about-file-patterns)를 참조하십시오.

>[!NOTE]
>
>결과 폴더의 크기가 작을수록 감시 폴더 성능이 향상됩니다. 예를 들어 감시 폴더에 대한 예상 로드가 매 시간마다 1000개 파일이면 `result/%Y%M%D%H` 같은 패턴을 사용하여 한 시간마다 새 하위 폴더가 생성되도록 합니다. 로드가 작은 경우(예: 하루에 1,000개 파일) `result/%Y%M%D` 같은 패턴을 사용할 수 있습니다.

**폴더 유지:** 스캔과 픽업 후 파일이 저장되는 위치입니다. 경로는 절대, 상대 또는 null 디렉토리 경로일 수 있습니다. 결과 폴더에 대해 설명된 대로 파일 패턴을 사용할 수 있습니다. 기본값은 preserve/%Y/%M/%D/입니다.

**실패 폴더:** 실패 파일이 저장되는 폴더입니다. 이 위치는 항상 감시 폴더를 기준으로 합니다. 결과 폴더에 대해 설명된 대로 파일 패턴을 사용할 수 있습니다.

읽기 전용 파일은 처리되지 않고 실패 폴더에 저장됩니다.

기본값은 실패입니다/%Y/%M/%D/.

**실패 시 유지:** 서비스에서 작업을 실행하지 못할 경우 입력 파일을 보존합니다. 기본값은 true입니다.

**중복 파일 이름 덮어쓰기:** True로 설정하면 결과 폴더의 파일을 덮어쓰고 폴더를 유지합니다. [False]로 설정하면 이름에 숫자 인덱스 접미어를 사용하는 파일 및 폴더가 사용됩니다. 기본값은 False입니다.

**제거 기간:** (필수) 결과 폴더의 파일 및 폴더가 이 값보다 오래된 경우 삭제됩니다. 이 값은 일 단위로 측정됩니다. 이 설정은 결과 폴더가 꽉 차지 않도록 확인하는 데 유용합니다.

-1일 값은 결과 폴더를 삭제하지 않음을 나타냅니다. 기본값은 -1입니다.

**작업 이름:** (필수) 감시 폴더 끝점에 할당할 수 있는 작업 목록입니다.

**입력 매개 변수 매핑:** 서비스 및 작업을 처리하는 데 필요한 입력을 구성하는 데 사용됩니다. 사용 가능한 설정은 감시 폴더 끝점을 사용하는 서비스에 따라 다릅니다. 입력 유형은 다음과 같습니다.

**리터럴:** 감시 폴더는 표시된 대로 필드에 입력된 값을 사용합니다. 모든 기본 Java 유형이 지원됩니다. 예를 들어 API에서 String, long, int 및 Boolean과 같은 입력을 사용하는 경우 문자열이 적절한 유형으로 변환되고 서비스가 호출됩니다.

**변수:** 입력한 값은 감시 폴더에서 입력을 선택하는 데 사용하는 파일 패턴입니다. 예를 들어 암호 암호화 서비스의 경우 입력 문서가 PDF 파일이어야 하는 경우 사용자가 &amp;ast;.pdf를 파일 패턴으로 사용할 수 있습니다. 감시 폴더는 이 패턴과 일치하는 감시 폴더의 모든 파일을 선택하고 각 파일에 대한 서비스를 호출합니다. 변수를 사용하면 모든 입력 파일이 문서로 변환됩니다. 입력 유형으로 문서를 사용하는 API만 지원됩니다.

**출력 매개 변수 매핑:** 서비스 및 작업의 출력을 구성하는 데 사용됩니다. 사용 가능한 설정은 감시 폴더 끝점을 사용하는 서비스에 따라 다릅니다.

감시 폴더 출력은 단일 문서, 문서 목록 또는 문서 맵이 될 수 있습니다. 이러한 출력 문서는 출력 매개 변수 매핑에 지정된 패턴을 사용하여 결과 폴더에 저장됩니다.

>[!NOTE]
>
>고유한 출력 파일 이름의 결과로 이어질 이름을 지정하면 성능이 향상됩니다. 예를 들어 서비스가 하나의 출력 문서를 반환하고 출력 매개 변수 매핑이 `%F.%E`(입력 파일의 파일 이름 및 확장명)에 매핑하는 경우를 생각해 보십시오. 이 경우 사용자가 매 분마다 동일한 이름의 파일을 드롭하고 결과 폴더가 `result/%Y/%M/%D`으로 구성되어 있고 [중복 파일 이름 덮어쓰기] 설정이 꺼져 있으면 감시 폴더는 중복 파일 이름을 확인하려고 합니다. 중복 파일 이름을 확인하는 프로세스는 성능에 영향을 줄 수 있습니다. 이러한 경우 출력 매개 변수 매핑을 `%F_%h_%m_%s_%l`으로 변경하여 이름에 시간, 분, 초 및 밀리초 값을 추가하거나 드롭된 파일에 고유한 이름이 있는지 확인하면 성능이 향상될 수 있습니다.

## 파일 패턴 정보 {#about-file-patterns}

관리자는 서비스를 호출할 수 있는 파일 유형을 지정할 수 있습니다. 각 감시 폴더에 대해 여러 파일 패턴을 설정할 수 있습니다. 파일 패턴은 다음 파일 속성 중 하나일 수 있습니다.

* 특정 파일 이름 확장자가 있는 파일;예: &amp;ast;.dat, &amp;ast;.xml, &amp;ast;.pdf,;
* 특정 이름의 파일;예를 들어, data.&amp;ast;
* 다음 예와 같이 이름과 확장명에 합성 표현식이 있는 파일:

   * Data[0-9][0-9][0-9].[dD][aA]&#39;port&#39;
   * &amp;ast;[dD][Aa]&#39;port&#39;
   * &amp;ast;[Xx][Mm][Ll]

관리자는 결과를 저장할 출력 폴더의 파일 패턴을 정의할 수 있습니다. 출력 폴더(결과, 보존 및 실패)에 대해 관리자는 다음 파일 패턴을 지정할 수 있습니다.

* %Y = 년(전체)
* %y = 년(마지막 2자리)
* %M = 월,
* %D = 월 중 일,
* %d = 일 년,
* %h = 시간,
* %m = 분,
* %s = 초,
* %R = 0-9 사이의 난수
* %J = 작업 이름

예를 들어 결과 폴더의 경로는 `C:\Adobe\Adobe_Experience_Manager_forms\BarcodedForms\%y\%m\%d`일 수 있습니다.

출력 매개 변수 매핑은 다음과 같은 추가 패턴을 지정할 수도 있습니다.

* %F = 소스 파일 이름
* %E = 소스 파일 이름 확장명

출력 매개 변수 매핑 패턴이 &quot;File.separator&quot;(경로 구분 기호)로 끝나는 경우 폴더가 생성되고 내용이 해당 폴더에 복사됩니다. 패턴이 &quot;File.separator&quot;로 끝나지 않으면 해당 이름으로 컨텐트(결과 파일 또는 폴더)가 만들어집니다. 출력 매개 변수 매핑에 대한 자세한 내용은 [감시 폴더 팁과 트릭](configuring-watched-folder-endpoints.md#tips-and-tricks-for-watched-folders)을 참조하십시오.

## {#about-throttling} 조정 정보

감시 폴더 끝점에 대해 조절이 활성화되면 지정된 시간에 처리할 수 있는 감시 폴더 작업 수를 제한합니다. 최대 작업 수는 감시 폴더 끝점에서도 구성할 수 있는 일괄 처리 크기 값에 의해 결정됩니다. 스로틀링 제한에 도달하면 감시 폴더의 입력 디렉토리에 있는 들어오는 문서를 폴링하지 않습니다. 또한 다른 감시 폴더 작업이 완료되고 다른 투표 작업이 시도될 때까지 문서는 입력 디렉토리에 유지됩니다. 동기 처리 시 단일 폴링에서 처리된 모든 작업은 단일 스레드에서 연속적으로 처리되지만 스로틀링 한계로 계산됩니다.

>[!NOTE]
>
>스로틀링은 클러스터에 따라 확장되지 않습니다. 조절이 활성화되면 클러스터 전체가 지정된 시간에 배치 크기에 지정된 작업 수보다 많은 작업을 처리하지 않습니다. 이 제한은 클러스터 전체에 적용되며 클러스터의 각 노드에만 국한되지 않습니다. 예를 들어 일괄 처리 크기가 2인 경우 두 개의 작업을 처리하는 단일 노드에서 제한 제한에 도달하고, 작업 중 하나가 완료될 때까지 다른 노드가 입력 디렉토리를 폴링하지 않을 수 있습니다.

### 조절이 작동하는 방식 {#how-throttling-works}

감시 폴더는 각 반복 간격에서 입력 폴더를 스캔하고, 일괄 처리 크기에 지정된 파일 수를 선택하고 이러한 각 파일에 대한 대상 서비스를 호출합니다. 예를 들어 일괄 처리 크기가 4인 경우 각 검색에서 감시 폴더는 4개의 파일을 선택하고 4개의 호출 요청을 만들고 대상 서비스를 호출합니다. 이러한 요청이 완료되기 전에 감시 폴더를 호출하면 이전 4개의 작업이 완료되었는지 여부에 관계없이 4개의 작업이 다시 시작됩니다.

조절은 이전 작업이 완료되지 않은 경우 감시 폴더가 새 작업을 호출하지 못하게 합니다. 감시 폴더는 진행 중인 작업을 감지하고 진행 중인 일괄 처리 크기 빼기 작업을 기준으로 새 작업을 처리합니다. 예를 들어 두 번째 호출에서 완료된 작업 수가 3개 뿐이며 하나의 작업이 진행 중인 경우 감시 폴더는 3개의 작업만 더 호출합니다.

* 감시 폴더는 진행 중인 작업 수를 확인하기 위해 단계 폴더에 있는 파일 수에 의존합니다. 스테이지 폴더에서 파일이 처리되지 않은 상태로 남아 있는 경우 감시 폴더는 더 이상 작업을 호출하지 않습니다. 예를 들어 일괄 처리 크기가 4개 및 3개의 작업이 중지된 경우 감시 폴더는 후속 조사에서 하나의 작업만 호출합니다. 스테이지 폴더에 파일이 처리되지 않은 상태로 유지되는 여러 가지 시나리오가 있습니다. 작업이 지연되면 관리자는 감시 폴더가 스테이지 폴더 밖으로 파일을 이동할 수 있도록 양식 워크플로우 관리 페이지의 프로세스를 종료할 수 있습니다.
* 양식 서버가 다운된 후 감시 폴더에서 작업을 호출할 수 있으면 관리자는 파일을 스테이지 폴더 밖으로 이동할 수 있습니다. 자세한 내용은 [실패 지점 및 복구](configuring-watched-folder-endpoints.md#failure-points-and-recovery)를 참조하십시오.
* 양식 서버가 실행 중이지만 Job Manager 서비스가 다시 호출될 때 감시 폴더가 실행되고 있지 않으면, 순서가 지정된 시퀀스에서 서비스가 시작되지 않을 때 관리자가 파일을 스테이지 폴더 밖으로 이동할 수 있습니다. 자세한 내용은 [실패 지점 및 복구](configuring-watched-folder-endpoints.md#failure-points-and-recovery)를 참조하십시오.


## 성능 및 확장성 {#performance-and-scalability}

감시 폴더는 하나의 노드에서 총 100개의 폴더를 제공할 수 있습니다. 감시 폴더 성능은 양식 서버의 성능에 따라 다릅니다. 비동기 호출의 경우 성능은 작업 관리자 큐에 있는 시스템 부하 및 작업에 더 의존합니다.

감시 폴더 성능은 클러스터에 노드를 추가하여 개선할 수 있습니다. 감시 폴더 작업은 Quartz 스케줄러를 통해 클러스터 노드 전체에 배포되며, 비동기 요청의 경우 작업 관리자 서비스에 의해 배포됩니다. 모든 작업은 데이터베이스에 유지됩니다.

감시 폴더는 작업을 예약하고, 예약하지 않고, 예약하기 위해 스케줄러 서비스에 따라 다릅니다. 스케줄러 서비스 스레드 풀을 공유하는 이벤트 관리 서비스, 사용자 관리자 서비스 및 이메일 공급자 서비스와 같은 기타 서비스를 사용할 수 있습니다. 감시 폴더 성능에 영향을 줄 수 있습니다. 모든 서비스가 스케줄러 서비스 스레드 풀 을 사용하기 시작하면 스케줄러 서비스 스레드 풀 조정이 필요합니다.

## 클러스터 {#watched-folders-in-a-cluster}의 감시 폴더

클러스터에서 감시 폴더는 로드 밸런싱 및 장애 조치에 대해 Quartz 스케줄러와 작업 관리자 서비스에 따라 달라집니다. Quartz 클러스터 비헤이비어에 대한 자세한 내용은 [Quartz 설명서](https://www.quartz-scheduler.org/documentation)를 참조하십시오.

감시 폴더는 각 투표에서 다음 3가지 주요 작업을 수행합니다.

* 폴더 스캔
* 대상 서비스 호출
* 결과 처리

로드 밸런싱 및 장애 조치 동작은 감시 폴더가 동기 또는 비동기 호출용으로 구성되어 있는지 여부에 따라 변경됩니다.

### 클러스터 {#synchronous-watched-folder-in-a-cluster}의 동기화된 감시 폴더

동기 조사의 경우 Quartz 부하 균형 조정기가 폴링 이벤트를 가져올 노드를 결정합니다. 폴링 이벤트를 가져오는 노드가 모든 작업을 수행합니다.폴더를 스캔하고 대상 서비스를 호출하고 결과를 처리합니다.

![en_synchwatchedfoldercluster](assets/en_synchwatchedfoldercluster.png)

동기 호출의 경우 한 노드가 실패하면 Quartz 스케줄러는 새 폴링 이벤트를 다른 노드로 보냅니다. 실패한 노드에서 시작된 호출은 손실됩니다. 실패한 작업과 연관된 파일을 복구하는 방법에 대한 자세한 내용은 [실패 지점 및 복구](configuring-watched-folder-endpoints.md#failure-points-and-recovery)를 참조하십시오.


### 클러스터 {#asynchronous-watched-folder-in-a-cluster}의 비동기 감시 폴더

비동기 호출의 경우 Quartz 부하 균형 조정기가 폴링 이벤트를 가져올 노드를 결정합니다. 폴링 이벤트를 가져오는 노드는 입력 폴더를 스캔하고 작업 관리자 서비스 큐에 요청을 배치하여 대상 서비스를 호출합니다. 따라서 작업 관리자 서비스 부하 균형 조정기는 호출 요청을 처리할 노드를 결정해야 합니다. 노드 A가 호출 요청을 만들었지만 노드 B가 요청을 처리하는 것으로 끝날 수 있습니다. 또는 호출 요청을 시작한 노드가 요청을 처리하도록 끝날 수도 있습니다.

![en_asynchwatchedfoldercluster](assets/en_asynchwatchedfoldercluster.png)

비동기 호출의 경우 한 노드가 실패하면 Quartz 스케줄러는 새 폴링 이벤트를 다른 노드로 보냅니다. 실패한 노드에서 생성된 호출 요청은 작업 관리자 서비스 큐에 있으며 처리를 위해 다른 노드로 전송됩니다. 호출 요청이 생성되지 않은 파일은 스테이지 폴더에 남아 있습니다. 실패한 작업과 연관된 파일을 복구하는 방법에 대한 자세한 내용은 [실패 지점 및 복구](configuring-watched-folder-endpoints.md#failure-points-and-recovery)를 참조하십시오.


## 실패 지점 및 복구 {#failure-points-and-recovery}

각 투표 이벤트에서 감시 폴더는 입력 폴더를 잠가 포함 파일 패턴과 일치하는 파일을 스테이지 폴더로 이동한 다음 입력 폴더를 잠금 해제합니다. 두 개의 스레드가 동일한 파일 세트를 선택하여 두 번 처리하지 않도록 잠금이 필요합니다. 이러한 경우는 작은 반복 간격과 큰 일괄 처리 크기로 증가합니다. 파일이 스테이지 폴더로 이동되면 다른 스레드가 폴더를 검색할 수 있도록 입력 폴더의 잠금이 해제됩니다. 한 스레드에서 파일을 처리하는 동안 다른 스레드가 스캔할 수 있으므로 이 단계는 높은 처리량을 제공하도록 도와줍니다.

파일이 스테이지 폴더로 이동되면 각 파일에 대한 호출 요청이 생성되고 대상 서비스가 호출됩니다. 감시 폴더가 단계 폴더의 파일을 복구할 수 없는 경우가 있습니다.

* 감시 폴더를 통해 호출 요청을 만들기 전에 서버가 다운되면 스테이지 폴더의 파일이 스테이지 폴더에 남아 있고 복구되지 않습니다.
* 감시 폴더가 단계 폴더의 각 파일에 대한 호출 요청을 성공적으로 만들고 서버가 충돌하는 경우 호출 유형에 따라 두 가지 비헤이비어가 있습니다.

**동기:** 감시 폴더가 서비스를 동기적으로 호출하도록 구성된 경우 스테이지 폴더의 모든 파일이 스테이지 폴더에서 처리되지 않은 상태로 유지됩니다.

**비동기:** 이 경우 감시 폴더는 작업 관리자 서비스에 의존합니다. 작업 관리자 서비스가 감시 폴더를 호출하면 단계 폴더의 파일이 호출 결과에 따라 보존 또는 실패 폴더로 이동됩니다. 작업 관리자 서비스가 감시 폴더를 호출하지 않으면 파일이 스테이지 폴더에서 처리되지 않은 상태로 유지됩니다. 이러한 상황은 작업 관리자가 다시 전화할 때 감시 폴더가 실행되지 않을 때 발생합니다.

### 스테이지 폴더 {#recovering-unprocessed-source-files-in-the-stage-folder}에서 처리되지 않은 소스 파일을 복구하는 중

감시 폴더가 단계 폴더의 소스 파일을 처리할 수 없는 경우 처리되지 않은 파일을 복구할 수 있습니다.

1. 응용 프로그램 서버 또는 노드를 다시 시작합니다.
1. (선택 사항) 감시 폴더가 새 입력 파일을 처리하지 못하게 합니다. 이 단계를 건너뛸 경우 스테이지 폴더에서 처리되지 않은 파일을 확인하는 것은 훨씬 더 어렵습니다. 감시 폴더에서 새 입력 파일을 처리하지 못하게 하려면 다음 작업 중 하나를 수행합니다.

   * 응용 프로그램 및 서비스에서 감시 폴더 끝점에 대한 파일 패턴 포함 매개 변수를 새 입력 파일과 일치하지 않는 값으로 변경합니다(예: `NOMATCH` 입력).
   * 새 입력 파일을 만드는 프로세스를 일시 중단합니다.

   AEM 양식에서 모든 파일을 복구하여 처리할 때까지 기다립니다. 대부분의 파일은 복구되고 새로운 입력 파일은 올바르게 처리됩니다. 감시 폴더가 복구되고 파일을 처리할 때까지 기다리는 시간은 호출할 작업의 길이와 복구할 파일 수에 따라 다릅니다.

1. 처리할 수 없는 파일을 확인합니다. 적절한 시간을 기다린 후 이전 단계를 완료했지만 아직 처리되지 않은 파일이 단계 폴더에 남아 있으면 다음 단계로 이동합니다.

   >[!NOTE]
   >
   >스테이지 디렉토리에서 파일의 날짜 및 시간 스탬프를 볼 수 있습니다. 파일 수 및 일반적인 처리 시간에 따라 고정될 수 있을 정도로 오래된 파일을 결정할 수 있습니다.

1. 처리되지 않은 파일을 스테이지 디렉토리에서 입력 디렉토리로 복사합니다.
1. 2단계에서 감시 폴더가 새 입력 파일을 처리하지 못하게 한 경우 파일 패턴 포함을 이전 값으로 변경하거나 비활성화한 프로세스를 다시 활성화합니다.

## 감시 폴더 {#security-considerations-for-watched-folders}에 대한 보안 고려 사항

각 감시 폴더는 사용자 이름과 암호로 구성됩니다. 이러한 자격 증명은 서비스를 호출할 때 사용됩니다. 감시 폴더는 감시 폴더의 소유자만 공유 폴더에 액세스할 수 있도록 공유 폴더가 기본 보안 파일 시스템으로 보호되고 있다는 사실에 의존합니다.

## 감시 폴더 {#tips-and-tricks-for-watched-folders}에 대한 팁 및 트릭

감시 폴더 끝점을 구성할 때 몇 가지 팁과 요령은 다음과 같습니다.

* Windows에서 이미지 파일을 처리하는 감시 폴더가 있는 경우 Windows 자동 생성된 Thumbs.db 파일이 감시 폴더에 의해 폴링되지 않도록 하려면 [파일 패턴 포함] 또는 [파일 패턴 제외] 옵션의 값을 지정합니다.
* cron 표현식이 지정된 경우 반복 간격이 무시됩니다. cron 표현식 사용은 Quartz 오픈 소스 작업 예약 시스템 버전 1.4.0을 기반으로 합니다.
* 일괄 처리 크기는 감시 폴더의 각 스캔에서 선택할 파일 또는 폴더의 수입니다. 일괄 처리 크기를 2개, 10개의 파일 또는 폴더가 감시 폴더 입력 폴더에 있는 경우 각 스캔에서는 2개만 선택됩니다. 다음 스캔에서는 반복 간격에 지정된 시간 후에 다음 두 파일이 선택됩니다.
* 파일 패턴의 경우, 관리자는 파일 패턴을 지정할 수 있도록 와일드카드 패턴에 대한 지원이 추가된 일반 표현식을 지정할 수 있습니다. 감시 폴더는 &amp;ast;와 같은 와일드카드 패턴을 지원하기 위해 일반 표현식을 수정합니다.&amp;ast;또는 &amp;ast;.pdf(&amp;M) 이러한 와일드카드 패턴은 일반 표현식에서 지원되지 않습니다.
* 감시 폴더는 입력에 대한 입력 폴더를 검사하며, 파일이나 폴더 처리를 시작하기 전에 소스 파일이나 폴더가 입력 폴더에 완전히 복사되었는지 여부를 알지 못합니다. 파일이나 폴더를 선택하기 전에 소스 파일 또는 폴더가 감시 폴더의 입력 폴더로 완전히 복사되도록 하려면 다음 작업을 수행합니다.

   * 대기 시간을 사용합니다. 이 시간은 감시 폴더가 마지막으로 수정한 시간에서 대기하는 시간(밀리초)입니다. 처리할 파일이 많을 경우 이 기능을 사용합니다. 예를 들어, 파일을 다운로드하는 데 10분이 걸리는 경우 대기 시간을 10&amp;ast;60 &amp;ast;1000밀리초로 지정합니다. 이렇게 하면 감시 폴더가 10분만큼 오래된 경우 해당 파일을 가져오지 못합니다.
   * 제외 파일 패턴을 사용하고 파일 패턴을 포함합니다. 예를 들어 제외 파일 패턴이 `ex*`이고 포함 파일 패턴이 `in*`인 경우 감시 폴더는 &quot;in&quot;으로 시작하는 파일을 선택하고 &quot;ex&quot;로 시작하는 파일은 선택하지 않습니다. 큰 파일이나 폴더를 복사하려면 먼저 파일 또는 폴더의 이름을 &quot;ex&quot;로 시작해야 합니다. &quot;ex&quot;라는 파일 또는 폴더가 감시 폴더에 완전히 복사되면 이름을 &quot;in&amp;ast;&quot;로 바꿉니다.

* 제거 기간을 사용하여 결과 폴더를 정리합니다. 감시 폴더는 제거 기간에 언급된 기간보다 오래된 모든 파일을 정리합니다. 기간은 일 단위입니다.
* 감시 폴더 끝점을 추가할 때 작업 이름을 선택하면 입력 매개 변수 매핑이 채워집니다. 각 작업 입력에 대해 하나의 입력 매개 변수 매핑 필드가 생성됩니다. 입력 매개 변수 매핑의 예는 다음과 같습니다.

   * `com.adobe.idp.Document` 입력의 경우:서비스 작업에 `Document` 유형의 입력이 있으면 관리자는 매핑 유형을 `Variable`로 지정할 수 있습니다. 감시 폴더는 입력 매개 변수에 대해 지정된 파일 패턴을 기준으로 감시 폴더의 입력 폴더에서 입력을 선택합니다. 관리자가 매개 변수로 `*.pdf`을 지정하는 경우 확장자가 .pdf인 각 파일을 선택하여 `com.adobe.idp.Document`로 변환하고 서비스가 호출됩니다.
   * `java.util.Map` 입력의 경우:서비스 작업에 `Map` 유형의 입력이 있으면 관리자는 매핑 유형을 `Variable`로 지정하고 `*.pdf` 같은 패턴으로 매핑 값을 입력할 수 있습니다. 예를 들어, 서비스는 1.pdf 및 2.pdf와 같은 입력 폴더에 있는 2개의 파일을 나타내는 2개의 `com.adobe.idp.Document` 개체의 맵을 필요로 합니다. 감시 폴더는 키를 파일 이름으로, 값은 `com.adobe.idp.Document`으로 포함하는 맵을 만듭니다.
   * `java.util.List` 입력의 경우:서비스 작업에 목록 유형의 입력이 있으면 관리자는 매핑 유형을 `Variable`로 지정하고 `*.pdf` 같은 패턴의 매핑 값을 입력할 수 있습니다. PDF 파일이 입력 폴더에 드롭되면 감시 폴더는 이러한 파일을 나타내는 `com.adobe.idp.Document` 개체 목록을 만들고 대상 서비스를 호출합니다.
   * `java.lang.String`의 경우:관리자에게는 두 가지 옵션이 있습니다. 먼저 관리자는 매핑 유형을 `Literal`으로 지정하고 매핑 값을 문자열로 입력할 수 있습니다. 예를 들어 `hello.` 감시 폴더는 `hello` 문자열로 서비스를 호출합니다. 둘째, 관리자는 매핑 유형을 `Variable`으로 지정하고 `*.txt` 같은 패턴으로 매핑 값을 입력할 수 있습니다. 후자의 경우 확장명이 .txt인 파일은 서비스를 호출하기 위해 문자열로 강제 전달되는 문서로 읽습니다.
   * Java 원시 유형:관리자는 매핑 유형을 `Literal`으로 지정하고 값을 제공할 수 있습니다. 감시 폴더는 지정된 값으로 서비스를 호출합니다.

* 감시 폴더는 문서 작업을 위한 것입니다. 지원되는 출력은 `com.adobe.idp.Document`, `org.w3c.Document`, `org.w3c.Node`뿐만 아니라 이러한 유형의 목록과 맵입니다. 다른 유형의 경우 실패 폴더에 오류 출력이 발생합니다.
* 결과가 결과 폴더에 없으면 실패 폴더를 확인하여 오류가 발생했는지 확인합니다.
* 감시 폴더는 비동기 모드에서 사용되는 경우에 가장 적합합니다. 이 모드에서는 감시 폴더가 호출 요청을 큐에 놓고 다시 호출합니다. 그러면 큐가 비동기적으로 처리됩니다. 비동기 옵션이 설정되어 있지 않으면 감시 폴더는 대상 서비스를 동기적으로 호출하고 프로세스 엔진은 서비스가 요청 및 결과가 생성될 때까지 기다립니다. 대상 서비스가 요청을 처리하는 데 시간이 오래 걸리는 경우 감시 폴더는 시간 초과 오류를 얻을 수 있습니다.
* 가져오기 및 내보내기 작업을 위해 감시 폴더를 만들 때 파일 이름 확장자를 추출할 수 없습니다. 감시 폴더를 사용하여 양식 데이터 통합 서비스를 호출할 때 출력 파일의 파일 이름 확장자 유형이 문서 객체 유형에 대한 의도한 출력 형식과 일치하지 않을 수 있습니다. 예를 들어 내보내기 작업을 호출하는 감시 폴더에 대한 입력 파일이 데이터를 포함하는 XFA 양식인 경우 출력은 XDP 데이터 파일이어야 합니다. 올바른 파일 이름 확장명을 가진 출력 파일을 가져오려면 출력 매개 변수 매핑에서 지정할 수 있습니다. 이 예제에서는 출력 매개 변수 매핑에 %F.xdp를 사용할 수 있습니다.
* 감시 폴더는 입력 파일을 폴더에 완전히 복사하기 전에 처리할 수 있습니다. Windows에서와 마찬가지로 UNIX에서는 파일 잠금이 필수가 아닙니다. 이러한 이유로 감시 폴더에 파일이 복사되면 감시 폴더는 파일 복사가 완료될 때까지 기다리지 않고 파일을 스테이지로 이동할 수 있습니다. 이 비헤이비어를 사용하면 입력 파일의 일부만 처리됩니다. 현재 해결 방법은 두 가지가 있습니다.

   * 해결 방법 1

      1. 파일 패턴 제외(예: temp&amp;ast;.ps)에 대한 패턴을 지정합니다.
      1. temp(예: temp1.ps)로 시작하는 파일을 감시 폴더에 복사합니다.
      1. 파일이 감시 폴더에 완전히 복사되면 파일 이름을 파일 패턴 포함에 지정된 패턴에 맞게 변경합니다. 감시 폴더를 사용하면 완료된 파일을 스테이지로 이동합니다.
   * 해결 방법 2

      감시 폴더에 파일을 복사하는 데 걸리는 최대 시간을 알고 있는 경우 대기 시간을 초 단위로 지정합니다. 그런 다음 감시 폴더는 파일을 스테이지로 이동하기 전에 지정된 시간을 기다립니다.

      한 스레드가 기록될 때 Windows에서 파일을 잠그기 때문에 Windows에서 파일에 문제가 되지 않습니다. 그러나 Windows의 폴더에 대한 문제입니다. 폴더의 경우 해결 방법 1의 단계를 따라야 합니다.


* 감시 폴더에 대한 폴더 이름 유지 끝점 속성이 null 디렉토리 경로로 설정된 경우 스테이징 디렉터리는 정리되어야 하는 대로 정리되지 않습니다. 디렉토리에 처리된 파일과 임시 폴더가 여전히 들어 있습니다.

## 감시 폴더 {#service-specific-recommendations-for-watched-folders}에 대한 서비스 특정 권장 사항

모든 서비스의 경우, 감시 폴더가 처리를 위해 새 파일 및 폴더를 선택하는 속도가 AEM Forms 서버에서 처리할 수 있는 작업 속도를 초과하지 않도록 감시 폴더의 일괄 크기 및 반복 간격을 조정해야 합니다. 사용할 실제 매개 변수는 감시 폴더 구성 횟수, 감시 폴더를 사용하는 서비스, 프로세서 작업 강도 등에 따라 달라질 수 있습니다.

### PDF 서비스 권장 사항 생성 {#generate-pdf-service-recommendations}

* PDF 생성 서비스는 다음과 같은 파일 유형에 대해 한 번에 하나의 파일만 변환할 수 있습니다.Microsoft Word, Microsoft Excel, Microsoft PowerPoint, Microsoft Project, AutoCAD, Adobe Photoshop®, Adobe FrameMaker® 및 Adobe PageMaker®. 이것들은 장기 행진 일자리들이다.따라서 배치 크기를 낮은 설정으로 유지해야 합니다. 클러스터에 노드가 더 많을 경우 반복 간격을 늘립니다.
* PostScript(PS), EPS(Encapsulated PostScript) 및 이미지 파일 유형의 경우 PDF 생성 서비스는 여러 파일을 동시에 처리할 수 있습니다. 서버 용량 및 클러스터 내 노드 수에 따라 세션 Bean 풀 크기(병렬 수행 변환 수를 제어하는 세션 Bean 풀 크기)를 신중하게 조정해야 합니다. 그런 다음 일괄 처리 크기를 변환하려는 파일 유형의 세션 Bean 풀 크기와 같은 숫자로 늘립니다. 폴링 빈도는 클러스터 내 노드 수에 따라 지정해야 합니다.그러나 PDF 생성 서비스는 이러한 유형의 작업을 매우 빠르게 처리하므로 반복 간격을 5 또는 10과 같은 낮은 값으로 구성할 수 있습니다.
* PDF 생성 서비스는 한 번에 하나의 OpenOffice 파일만 변환할 수 있지만 변환 속도가 매우 빨라집니다. PS, EPS 및 이미지 변환에 대한 위의 로직은 OpenOffice 변환에도 적용됩니다.
* 클러스터에서 균일한 로드 배포를 사용하려면 배치 크기를 낮게 유지하고 반복 간격을 늘립니다.

### 바코드 양식 서비스 추천 {#barcoded-forms-service-recommendations}

* 바코드 양식(작은 파일)을 처리할 때 최상의 성능을 얻으려면 [일괄 처리 크기]에 `10`, 반복 간격에 `2`을 입력합니다.
* 입력 폴더에 많은 파일이 배치되면 *thumbs.db*&#x200B;라는 숨겨진 파일이 발생하는 오류가 발생할 수 있습니다. 따라서 포함 파일에 대한 포함 파일 패턴을 입력 변수에 지정된 동일한 값(예: `*.tiff`)으로 설정하는 것이 좋습니다. 이렇게 하면 감시 폴더가 DB 파일을 처리할 수 없습니다.
* Barcoded Forms 서비스는 일반적으로 하나의 바코드를 처리하는 데 약 .5초가 걸리기 때문에 `5` 및 `2`의 반복 간격의 일괄 크기 값은 일반적으로 충분합니다.
* 감시 폴더는 새 파일이나 폴더를 선택하기 전에 프로세스 엔진이 작업을 완료할 때까지 기다리지 않습니다. 감시 폴더를 스캔하고 대상 서비스를 호출하고 있습니다. 이러한 동작은 엔진을 과부하가 시켜 리소스 문제와 시간 초과를 초래할 수 있습니다. 반복 간격과 일괄 처리 크기를 사용하여 감시 폴더 입력을 조절하는지 확인합니다. 감시 폴더가 더 많이 있는 경우 반복 간격을 늘리고 배치 크기를 줄일 수 있으며 끝점에 대한 제한을 활성화할 수 있습니다. 조절에 대한 자세한 내용은 [조절 ](configuring-watched-folder-endpoints.md#about-throttling) 정보를 참조하십시오.
* 감시 폴더는 사용자 이름 및 도메인 이름에 지정된 사용자를 가장합니다. 감시 폴더는 직접 호출되거나 프로세스가 짧을 경우 이 사용자로 서비스를 호출합니다. 긴 기간의 프로세스에서 프로세스는 시스템 컨텍스트에서 호출됩니다. 관리자는 감시 폴더에 대한 운영 체제 정책을 설정하여 액세스를 허용하거나 거부할 사용자를 결정할 수 있습니다.
* 파일 패턴을 사용하여 결과, 실패 및 폴더를 구성할 수 있습니다. ([파일 패턴 정보](configuring-watched-folder-endpoints.md#about-file-patterns) 참조)

* 감시 폴더는 감시 폴더를 스캔하기 위해 Quartz 스케줄러를 사용합니다. Quartz 스케줄러에는 스캔할 스레드 풀이 있습니다. 감시 폴더에 대한 반복 간격이 매우 낮음(&lt; 5초)이고 일괄 처리 크기가 높음(> 2)이면 경합 조건이 발생할 수 있습니다. 이 조건이 발생하면 2개의 Quartz 스레드에서 하나의 파일을 선택합니다.

   * 스레드 중 하나가 파일을 찾아 해당 파일로 대상 서비스를 호출합니다.
   * 두 번째 스레드는 파일을 인식하지만 파일이 유효한지(읽기 또는 쓰기 파일) 여부를 확인하려고 할 때 실패하여 파일이 읽기 전용이므로 처리할 수 없음을 나타내는 잘못된 오류를 초래합니다. 이것은 낮은 반복 간격과 높은 일괄 처리 크기에서만 발생합니다.

