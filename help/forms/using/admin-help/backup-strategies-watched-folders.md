---
title: 감시 폴더에 대한 백업 전략
description: 이 문서에서는 다양한 백업 및 복구 시나리오가 감시 폴더에 미치는 영향, 해당 시나리오의 제한 사항과 결과, 데이터 손실을 최소화하는 방법을 설명합니다.
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/aem_forms_backup_and_recovery
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 0d36160a-29fa-4cc4-a0ff-fc681d3e040e
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
role: User, Developer
source-git-commit: e821be5233fd5f6688507096790d219d25903892
workflow-type: ht
source-wordcount: '1080'
ht-degree: 100%

---

# 감시 폴더에 대한 백업 전략 {#backup-strategies-for-watched-folders}

이 콘텐츠에서는 다양한 백업 및 복구 시나리오가 감시 폴더에 미치는 영향, 해당 시나리오의 제한 사항과 결과, 데이터 손실을 최소화하는 방법을 설명합니다.

*감시 폴더*&#x200B;는 감시 폴더 계층의 다음 폴더 중 하나에 있는 파일을 조작하는 구성된 서비스 작업을 호출하는 파일 시스템 기반 애플리케이션입니다.

* 입력
* 스테이지
* 출력
* 실패
* 보존

사용자나 클라이언트 애플리케이션은 먼저 파일이나 폴더를 입력 폴더에 넣습니다. 그런 다음, 서비스 작업은 처리를 위해 해당 파일을 스테이지 폴더로 이동합니다. 서비스에서 지정된 작업을 수행한 후 수정된 파일을 출력 폴더에 저장합니다. 성공적으로 처리된 소스 파일은 보존 폴더로 이동하고 처리에 실패한 파일은 실패 폴더로 이동합니다. 감시 폴더의 `Preserve On Failure` 속성이 활성화되면 처리에 실패한 소스 파일은 보존 폴더로 이동합니다. ([감시 폴더 엔드포인트 구성](/help/forms/using/admin-help/configuring-watched-folder-endpoints.md#configuring-watched-folder-endpoints)을 참조하십시오.)

파일 시스템을 백업하면 감시 폴더를 백업할 수 있습니다.

>[!NOTE]
>
>이 백업은 데이터베이스 또는 문서 저장 백업 및 복구 프로세스와 독립적으로 수행됩니다.

## 감시 폴더의 작동 방식 {#how-watched-folders-work}

이 콘텐츠에서는 감시 폴더 파일 조작 프로세스를 설명합니다. 복구 계획을 수립하기 전에 해당 프로세스를 이해하는 것이 중요합니다. 이 예에서는 감시 폴더의 `Preserve On Failure` 속성이 활성화되어 있습니다. 파일은 도착한 순서대로 처리됩니다.

다음 표에서는 프로세스 전체에서 샘플 파일(file1, file2, file3, file4, file5) 5개에 대한 파일 조작을 설명합니다. 이 표에서 x축은 시간(예: 시간 1 또는 T1)을 나타내고 y축은 감시 폴더 계층 내의 폴더(예: 입력)를 나타냅니다.

<table>
 <thead>
  <tr>
   <th><p>폴더</p></th>
   <th><p>T1</p></th>
   <th><p>T2</p></th>
   <th><p>T3</p></th>
   <th><p>T4</p></th>
   <th><p>T5</p></th>
   <th><p>T6</p></th>
   <th><p>T7</p></th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><p>입력</p></td>
   <td><p>file1, file2, file3, file4</p></td>
   <td><p>file2, file3, file4</p></td>
   <td><p>file3, file4</p></td>
   <td><p>file4</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file5</p></td>
   <td><p>비어 있음</p></td>
  </tr>
  <tr>
   <td><p>스테이지</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1</p></td>
   <td><p>file2</p></td>
   <td><p>file3</p></td>
   <td><p>file4</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file5</p></td>
  </tr>
  <tr>
   <td><p>출력</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1_out</p></td>
   <td><p>file1_out, file2_out</p></td>
   <td><p>file1_out, file2_out</p></td>
   <td><p>file1_out, file2_out, file4_out</p></td>
   <td><p>file1_out, file2_out, file4_out</p></td>
  </tr>
  <tr>
   <td><p>실패</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file3_fail, file3 </p></td>
   <td><p>file3_fail, file3 </p></td>
   <td><p>file3_fail, file3 </p></td>
  </tr>
  <tr>
   <td><p>보존</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1 </p></td>
   <td><p>file1, file2 </p></td>
   <td><p>file1, file2 </p></td>
   <td><p>file1, file2, file4 </p></td>
   <td><p>file1, file2, file4 </p></td>
  </tr>
 </tbody>
</table>

다음 텍스트는 각 시간에 대한 파일 조작을 설명합니다.

**T1:** 샘플 파일 4개를 입력 폴더에 넣습니다.

**T2:** 서비스 작업은 조작을 위해 file1을 스테이지 폴더로 이동합니다.

**T3:** 서비스 작업은 조작을 위해 file2를 스테이지 폴더로 이동합니다. file1의 결과를 출력 폴더에 넣고 file1을 보존 폴더로 이동합니다.

**T4:** 서비스 작업은 조작을 위해 file3을 스테이지 폴더에 넣습니다. file2의 결과를 출력 폴더에 넣고 file2를 보존 폴더에 넣습니다.

**T5:** 서비스 작업은 조작을 위해 file4를 스테이지 폴더에 넣습니다. file3 조작이 실패하고 서비스 작업은 해당 파일을 실패 폴더로 이동합니다.

**T6:** 서비스 작업은 file5를 입력 폴더에 넣습니다. file4의 결과를 출력 폴더에 넣고 file4를 보존 폴더에 넣습니다.

**T7:** 서비스 작업은 조작을 위해 file5를 스테이지 폴더에 넣습니다.

## 감시 폴더 백업 {#backing-up-watched-folders}

전체 감시 폴더 파일 시스템을 다른 파일 시스템에 백업하는 것이 좋습니다.

## 감시 폴더 복원 {#restoring-watched-folders}

이 섹션에서는 감시 폴더를 복원하는 방법을 설명합니다. 감시 폴더는 종종 1분 이내에 완료되는 단기 프로세스를 호출합니다. 이 경우 매시간 백업을 해서 감시 폴더를 복원하더라도 데이터 손실을 막을 수는 없습니다.

예를 들어 T1 시점에 백업이 수행되고 T7 시점에 서버에 장애가 발생하는 경우 file1, file2, file3, file4는 이미 조작된 상태입니다. T1에서 수행된 백업을 사용하여 감시 폴더를 복원하더라도 데이터 손실을 방지할 수는 없습니다.

최근에 백업을 수행한 경우 파일을 복원할 수 있습니다. 파일을 복원할 때 현재 파일이 있는 감시 폴더 계층 폴더를 고려하십시오.

**스테이지:** 이 폴더의 파일은 감시 폴더가 복원된 후 다시 처리됩니다.

**입력:** 이 폴더의 파일은 감시 폴더가 복원된 후 다시 처리됩니다.

**결과:** 이 폴더의 파일은 처리되지 않습니다.

**결과:** 이 폴더의 파일은 처리되지 않습니다.

**보존:** 이 폴더의 파일은 처리되지 않습니다.

## 데이터 손실을 최소화하기 위한 전략 {#strategies-to-minimize-data-loss}

다음 전략을 사용하면 감시 폴더를 복원할 때 출력 및 입력 폴더 데이터 손실을 최소화할 수 있습니다.

* 출력 및 실패 폴더를 자주(예: 매시간) 백업하여 결과 및 실패 파일이 손실되지 않도록 합니다.
* 감시 폴더가 아닌 다른 폴더에 입력 파일을 백업합니다. 이렇게 하면 출력 폴더나 실패 폴더에서 파일을 찾을 수 없는 경우에도 복구 후 파일을 사용할 수 있습니다. 파일 명명 체계가 일관성이 있는지 확인하십시오.

  예를 들어 `%F.`*확장자*&#x200B;를 포함하여 출력을 저장하는 경우 출력 파일의 이름은 입력 파일의 이름과 같습니다. 이렇게 하면 어떤 입력 파일이 조작되었는지, 어떤 입력 파일을 다시 제출해야 하는지 판단하는 데 도움이 됩니다. 결과 폴더에 file1_out 파일만 표시되고 file2_out, file3_out, file4_out이 표시되지 않으면 file2, file3, file4를 다시 제출해야 합니다.

* 사용 가능한 감시 폴더 백업이 작업을 처리하는 데 걸리는 시간보다 오래된 경우 시스템에서 감시 폴더를 만들고 파일을 자동으로 입력 폴더에 넣도록 해야 합니다.
* 사용 가능한 최신 백업이 충분히 최신이 아니고, 백업 시간이 파일을 처리하는 데 걸리는 시간보다 짧고, 감시 폴더가 복원된 경우 해당 파일은 다음 단계 중 하나에서 조작된 것입니다.

   * **1단계:** 입력 폴더 내에 있음
   * **2단계:** 스테이지 폴더에 복사되었지만, 프로세스가 아직 호출되지 않음
   * **3단계:** 스테이지 폴더에 복사되고 프로세스가 호출됨
   * **4단계:** 조작 진행 중
   * **5단계:** 결과 반환

  파일이 1단계에 있는 경우 조작됩니다. 파일이 2단계나 3단계에 있는 경우 다시 조작할 수 있도록 해당 파일을 입력 폴더에 넣습니다.

  >[!NOTE]
  >
  >파일 조작이 두 번 이상 발생하면 데이터 손실은 방지되지만, 결과가 중복될 수 있습니다.

## 결론 {#conclusion}

감시 폴더는 동적이고 끊임없이 변화하는 특성을 가지고 있으므로 하루 이내에 백업된 파일로 감시 폴더를 복원해야 합니다. 모범 사례는 결과를 백업하고, 입력 폴더를 서버에 저장하고, 입력 파일을 추적하여 실패 시 작업을 다시 제출할 수 있도록 하는 것입니다.
