---
title: 감시 폴더의 백업 전략
description: 이 문서에서는 감시 폴더가 다양한 백업 및 복구 시나리오의 영향을 받는 방법, 이러한 시나리오의 제한 사항 및 결과, 데이터 손실을 최소화하는 방법에 대해 설명합니다.
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/aem_forms_backup_and_recovery
products: SG_EXPERIENCEMANAGER/6.5/FORMS
exl-id: 0d36160a-29fa-4cc4-a0ff-fc681d3e040e
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
role: User, Developer
source-git-commit: e821be5233fd5f6688507096790d219d25903892
workflow-type: tm+mt
source-wordcount: '1080'
ht-degree: 0%

---

# 감시 폴더의 백업 전략 {#backup-strategies-for-watched-folders}

이 컨텐츠에서는 감시 폴더가 다양한 백업 및 복구 시나리오의 영향을 받는 방법, 이러한 시나리오의 제한 사항과 결과, 데이터 손실을 최소화하는 방법에 대해 설명합니다.

*감시 폴더*&#x200B;는 감시 폴더 계층 구조에 있는 다음 폴더 중 하나 내에서 파일을 조작하는 구성된 서비스 작업을 호출하는 파일 시스템 기반 응용 프로그램입니다.

* 입력
* 스테이지
* 출력
* 실패
* 유지

사용자 또는 클라이언트 응용 프로그램은 먼저 파일 또는 폴더를 입력 폴더에 놓습니다. 그런 다음 서비스 작업은 처리를 위해 파일을 스테이지 폴더로 이동합니다. 서비스가 지정된 작업을 수행하면 수정된 파일이 출력 폴더에 저장됩니다. 성공적으로 처리된 소스 파일은 유지 폴더로 이동되고 실패한 처리 파일은 실패 폴더로 이동됩니다. 감시 폴더에 대한 `Preserve On Failure` 특성을 사용하도록 설정하면 실패한 처리 원본 파일이 유지 폴더로 이동됩니다. [감시 폴더 끝점 구성](/help/forms/using/admin-help/configuring-watched-folder-endpoints.md#configuring-watched-folder-endpoints)을 참조하세요.

파일 시스템을 백업하여 감시 폴더를 백업할 수 있습니다.

>[!NOTE]
>
>이 백업은 데이터베이스 또는 문서 저장소 백업 및 복구 프로세스에 독립적입니다.

## 감시 폴더 작동 방식 {#how-watched-folders-work}

이 내용은 감시 폴더 파일 조작 프로세스에 대해 설명합니다. 복구 계획을 수립하기 전에 이 프로세스를 이해하는 것이 중요합니다. 이 예제에서는 감시 폴더에 대한 `Preserve On Failure` 특성을 사용하도록 설정합니다. 파일은 도착하는 순서대로 처리됩니다.

다음 표에서는 프로세스 전체에서 5개의 샘플 파일(file1, file2, file3, file4, file5)의 파일 조작을 설명합니다. 표에서 x축은 시간 1 또는 T1과 같이 시간을 나타내고 y축은 입력 과 같이 감시 폴더 계층 구조 내의 폴더를 나타냅니다.

<table>
 <thead>
  <tr>
   <th><p>폴더</p></th>
   <th><p>T1</p></th>
   <th><p>T2</p></th>
   <th><p>T3</p></th>
   <th><p>T4</p></th>
   <th><p>T5</p></th>
   <th><p>T6</p></th>
   <th><p>T7</p></th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><p>입력</p></td>
   <td><p>file1, file2, file3, file4</p></td>
   <td><p>file2, file3, file4</p></td>
   <td><p>file3, file4</p></td>
   <td><p>file4</p></td>
   <td><p>비어 있음</p></td>
   <td><p>파일5</p></td>
   <td><p>비어 있음</p></td>
  </tr>
  <tr>
   <td><p>스테이지</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1</p></td>
   <td><p>file2</p></td>
   <td><p>file3</p></td>
   <td><p>file4</p></td>
   <td><p>비어 있음</p></td>
   <td><p>파일5</p></td>
  </tr>
  <tr>
   <td><p>출력</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1_out</p></td>
   <td><p>file1_out, file2_out</p></td>
   <td><p>file1_out, file2_out</p></td>
   <td><p>file1_out, file2_out, file4_out</p></td>
   <td><p>file1_out, file2_out, file4_out</p></td>
  </tr>
  <tr>
   <td><p>실패</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file3_fail, file3 </p></td>
   <td><p>file3_fail, file3 </p></td>
   <td><p>file3_fail, file3 </p></td>
  </tr>
  <tr>
   <td><p>유지</p></td>
   <td><p>비어 있음</p></td>
   <td><p>비어 있음</p></td>
   <td><p>file1 </p></td>
   <td><p>file1, file2 </p></td>
   <td><p>file1, file2 </p></td>
   <td><p>file1, file2, file4 </p></td>
   <td><p>file1, file2, file4 </p></td>
  </tr>
 </tbody>
</table>

다음 텍스트에서는 각 시간에 대한 파일 조작을 설명합니다.

**T1:** 4개의 샘플 파일이 입력 폴더에 배치됩니다.

**T2:** 서비스 작업이 조작을 위해 file1을 단계 폴더로 이동합니다.

**T3:** 서비스 작업이 조작을 위해 file2를 단계 폴더로 이동합니다. 이 메서드는 file1의 결과를 출력 폴더에 배치하고 file1을 유지 폴더로 이동합니다.

**T4:** 서비스 작업에서는 조작하기 위해 file3을 단계 폴더에 배치합니다. 출력 폴더에 file2의 결과를 배치하고 유지 폴더에 file2를 배치합니다.

**T5:** 서비스 작업에서는 조작하기 위해 단계 폴더에 file4를 배치합니다. file3 조작이 실패하고 서비스 작업이 해당 파일을 failure 폴더에 저장합니다.

**T6:** 서비스 작업이 파일5를 입력 폴더에 배치합니다. 출력 폴더에 file4의 결과를 배치하고 유지 폴더에 file4를 배치합니다.

**T7:** 서비스 작업은 조작을 위해 파일5를 단계 폴더에 배치합니다.

## 감시 폴더 백업 {#backing-up-watched-folders}

전체 감시 폴더 파일 시스템을 다른 파일 시스템에 백업하는 것이 좋습니다.

## 감시 폴더 복원 {#restoring-watched-folders}

이 섹션에서는 감시 폴더를 복원하는 방법에 대해 설명합니다. 감시 폴더는 종종 1분 이내에 완료되는 단기 프로세스를 호출합니다. 이러한 경우 시간별로 수행되는 백업으로 감시 폴더를 복원해도 데이터 손실이 방지되지 않습니다.

예를 들어 T1 시점에 백업을 수행하고 T7 시점에 서버가 실패하면 file1, file2, file3 및 file4가 이미 조작된 것입니다. T1에서 수행한 백업으로 감시 폴더를 복원해도 데이터 손실이 방지되지 않습니다.

최근 백업을 수행한 경우 파일을 복원할 수 있습니다. 파일을 복원할 때 현재 파일이 있는 감시 폴더 계층 구조 폴더를 고려하십시오.

감시 폴더가 복원된 후 이 폴더의 **단계:** 파일이 다시 처리됩니다.

감시 폴더가 복원된 후 이 폴더의 **입력:** 파일이 다시 처리됩니다.

**결과:** 이 폴더의 파일이 처리되지 않았습니다.

이 폴더의 **출력:** 파일이 처리되지 않았습니다.

이 폴더의 **유지:** 파일이 처리되지 않습니다.

## 데이터 손실을 최소화하는 전략 {#strategies-to-minimize-data-loss}

다음 전략은 감시 폴더를 복원할 때 출력 및 입력 폴더 데이터 손실을 최소화할 수 있습니다.

* 결과 및 실패 파일이 손실되지 않도록 출력 및 실패 폴더를 시간별 등 자주 백업합니다.
* 감시 폴더가 아닌 다른 폴더에 입력 파일을 백업합니다. 이렇게 하면 출력 또는 실패 폴더에서 파일을 찾을 수 없는 경우 복구 후 파일 가용성을 보장합니다. 파일 이름 지정 체계가 일관되는지 확인합니다.

  예를 들어, 출력을 `%F.`*확장명*(으)로 저장하는 경우 출력 파일의 이름은 입력 파일과 같습니다. 이렇게 하면 조작되는 입력 파일과 다시 제출해야 하는 입력 파일을 결정하는 데 도움이 됩니다. 결과 폴더에 file1_out 파일만 표시되고 file2_out, file3_out 및 file4_out은 표시되지 않으면 file2, file3 및 file4를 다시 제출해야 합니다.

* 사용 가능한 감시 폴더 백업이 작업 처리에 걸리는 시간보다 오래된 경우 시스템에서 감시 폴더를 만들고 파일을 입력 폴더에 자동으로 배치할 수 있도록 해야 합니다.
* 사용 가능한 최신 백업이 최신이 아닌 경우 백업 시간이 파일을 처리하는 데 걸리는 시간보다 짧고 감시 폴더가 복원되면 다음 단계 중 하나에서 파일이 조작되었습니다.

   * 입력 폴더의 **단계 1:**
   * **단계 2:** 단계 폴더에 복사되었지만 프로세스가 아직 호출되지 않았습니다.
   * **단계 3:**&#x200B;이(가) 단계 폴더에 복사되고 프로세스가 호출됩니다.
   * **단계 4:** 조작 진행 중
   * **단계 5:**&#x200B;개의 결과가 반환됨

  1단계에 있는 파일은 조작됩니다. 파일이 단계 2 또는 3에 있는 경우 다시 조작하기 위해 입력 폴더에 넣습니다.

  >[!NOTE]
  >
  >파일 조작이 두 번 이상 발생할 경우 데이터 손실을 방지하지만 결과가 중복될 수 있습니다.

## 결론 {#conclusion}

감시 폴더의 동적이고 지속적으로 변경되는 특성으로 인해 감시 폴더의 복원은 하루 이내에 백업되는 파일로 수행해야 합니다. 가장 좋은 방법은 결과를 백업하고, 입력 폴더를 서버에 저장하고, 오류가 발생한 경우 작업을 다시 제출할 수 있도록 입력 파일을 추적하는 것입니다.
